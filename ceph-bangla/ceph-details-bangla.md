```
আমি Ceph Storage সম্পর্কে বিস্তারিত জানতে চাই।
আমাকে Ceph storage এর সমস্ত কিছু ধাপে-ধাপে জানাবেন।
Ceph storage এর মিনিম্যাম রিকুয়্যারিমেন্ট কি।
তারপরে কত ভাবে Ceph storage সেটআপ করা যাই।
কিভাবে হোম ল্যাবে Ceph storage সেটআপ করবো।
কিভাবে হোম ল্যাবে Ceph storage কনফিগারেশন করবো। 
```


**Ceph Storage কি?**

সহজ ভাষায় বলতে গেলে, Ceph একটি ওপেন-সোর্স সফটওয়্যার-ডিফাইনড স্টোরেজ প্ল্যাটফর্ম। এটি আপনাকে স্ট্যান্ডার্ড কমার্শিয়াল হার্ডওয়্যার ব্যবহার করে অত্যন্ত স্কেলেবল (Scaleable) এবং ফল্ট-টলারেণ্ট (Fault-tolerant) স্টোরেজ অবকাঠামো তৈরি করতে সাহায্য করে। Ceph একটি ইউনিফাইড স্টোরেজ সিস্টেম, যা ব্লক স্টোরেজ (Block Storage), অবজেক্ট স্টোরেজ (Object Storage) এবং ফাইল সিস্টেম (File System) - এই তিনটি প্রধান স্টোরেজ ইন্টারফেস সমর্থন করে।

**Ceph Storage এর মূল ধারণা:**

Ceph নিম্নলিখিত মূল ধারণাগুলির উপর ভিত্তি করে কাজ করে:

- **RADOS (Reliable Autonomic Distributed Object Store):** এটি Ceph এর মূল ভিত্তি। RADOS সমস্ত ডেটা অবজেক্ট হিসাবে সংরক্ষণ করে এবং স্বয়ংক্রিয়ভাবে ডেটা বিতরণ ও পুনরুদ্ধার করার ক্ষমতা রাখে।
    
- **OSD (Object Storage Device):** এগুলি হল ডেডিকেটেড স্টোরেজ সার্ভার যা ডেটা সংরক্ষণ করে এবং RADOS ক্লাস্টারের অংশ হিসেবে কাজ করে। প্রতিটি OSD একটি বা একাধিক ফিজিক্যাল ডিস্ক ড্রাইভ পরিচালনা করে।
    
- **Monitor:** মনিটর সার্ভারগুলি ক্লাস্টারের স্বাস্থ্য এবং অবস্থার উপর নজর রাখে। ক্লাস্টারের সদস্যদের মধ্যে ঐকমত্য (Consensus) বজায় রাখার জন্য এগুলি অপরিহার্য।
    
- **MDS (Metadata Server):** এটি CephFS (Ceph File System) এর জন্য মেটাডেটা (ফাইলের নাম, ডিরেক্টরি স্ট্রাকচার, অনুমতি ইত্যাদি) পরিচালনা করে। ব্লক স্টোরেজ এবং অবজেক্ট স্টোরেজের জন্য MDS এর প্রয়োজন হয় না।
    
- **Placement Groups (PGs):** ডেটা অবজেক্টগুলিকে ছোট ছোট অংশে ভাগ করে প্লেসমেন্ট গ্রুপে রাখা হয়। এই প্লেসমেন্ট গ্রুপগুলি OSD জুড়ে বিতরণ করা হয়, যা ডেটা লোড ব্যালেন্সিং এবং পুনরুদ্ধারকে সহজ করে তোলে।
    

**Ceph Storage এর সুবিধা:**

- **অত্যন্ত স্কেলেবল:** আপনি প্রয়োজন অনুযায়ী সহজেই স্টোরেজ ক্ষমতা বাড়াতে পারেন। নতুন OSD যোগ করার মাধ্যমে ক্লাস্টারের ধারণক্ষমতা এবং কর্মক্ষমতা উভয়ই বৃদ্ধি করা যায়।
    
- **উচ্চ স্থিতিশীলতা (High Availability):** Ceph ডিজাইন করা হয়েছে ফল্ট-টলারেণ্ট হওয়ার জন্য। একাধিক ডেটা কপি (Replication) এবং স্বয়ংক্রিয় ডেটা পুনরুদ্ধার প্রক্রিয়ার মাধ্যমে ডেটা হারানোর ঝুঁকি কমিয়ে আনা যায়।
    
- **ইউনিফাইড স্টোরেজ:** একই প্ল্যাটফর্মে ব্লক, অবজেক্ট এবং ফাইল স্টোরেজের সুবিধা পাওয়া যায়।
    
- **ওপেন সোর্স:** এটি একটি বিনামূল্যে এবং ওপেন সোর্স সফটওয়্যার, যা ব্যবহারের খরচ কমিয়ে আনে।
    
- **কাস্টমাইজযোগ্য:** ব্যবহারকারীর প্রয়োজন অনুযায়ী বিভিন্ন কনফিগারেশন অপশন উপলব্ধ।
    
- **বৃহত্তর ইকোসিস্টেম:** ক্লাউড প্ল্যাটফর্ম (যেমন OpenStack), ভার্চুয়ালাইজেশন প্ল্যাটফর্ম (যেমন Kubernetes, Proxmox) এবং অন্যান্য অ্যাপ্লিকেশনের সাথে সহজে ইন্টিগ্রেট করা যায়।
    

**Ceph Storage এর মিনিম্যাম রিকুয়্যারমেন্ট:**

হোম ল্যাবে Ceph Storage সেটআপ করার জন্য একেবারে ন্যূনতম প্রয়োজনীয়তাগুলি নিম্নরূপ:

- **কমপক্ষে ৩টি সার্ভার:** Ceph ক্লাস্টারের স্থিতিশীলতা এবং ফল্ট টলারেন্সের জন্য কমপক্ষে ৩টি নোড (সার্ভার) প্রয়োজন। এর মধ্যে:
    
    - কমপক্ষে ২টি OSD নোড (ডেটা স্টোরেজ সার্ভার)।
        
    - কমপক্ষে ২টি মনিটর নোড (যদিও ১টি মনিটর দিয়ে শুরু করা সম্ভব, প্রোডাকশন এনভায়রনমেন্টের জন্য বিজোড় সংখ্যক মনিটর - ৩, ৫ ইত্যাদি সুপারিশ করা হয়)।
        
- **হার্ডওয়্যার:** প্রতিটি সার্ভারে:
    
    - প্রসেসর: শালীন কর্মক্ষমতার প্রসেসর (মাল্টি-কোর হলে ভালো)।
        
    - RAM: কমপক্ষে ৪ জিবি (পরীক্ষার জন্য)। প্রোডাকশন ব্যবহারের জন্য অনেক বেশি RAM প্রয়োজন হবে (প্রতিটি OSD-এর জন্য কমপক্ষে ৬-৮ জিবি সুপারিশ করা হয়)।
        
    - ডিস্ক: ডেটা স্টোরেজের জন্য কমপক্ষে ১টি ডেডিকেটেড ডিস্ক (SSD কর্মক্ষমতার জন্য সুপারিশ করা হয়, তবে HDD দিয়েও শুরু করা যায়)। মনিটর নোডের জন্য খুব বেশি স্টোরেজের প্রয়োজন হয় না (কয়েক জিবি যথেষ্ট)।
        
    - নেটওয়ার্ক ইন্টারফেস কার্ড (NIC): প্রতিটি সার্ভারে কমপক্ষে ১টি গিগাবিট ইথারনেট NIC থাকা আবশ্যক। ১০ গিগাবিট বা তার বেশি নেটওয়ার্ক কর্মক্ষমতার জন্য সুপারিশ করা হয়।
        
- **অপারেটিং সিস্টেম:** লিনাক্স ডিস্ট্রিবিউশন (যেমন Ubuntu, CentOS, Debian)।
    
- **নেটওয়ার্ক:** সার্ভারগুলির মধ্যে স্থিতিশীল এবং নির্ভরযোগ্য নেটওয়ার্ক সংযোগ।
    

**গুরুত্বপূর্ণ নোট:** এটি একটি ন্যূনতম কনফিগারেশন। প্রোডাকশন ব্যবহারের জন্য অনেক বেশি রিসোর্স এবং আরও জটিল সেটআপের প্রয়োজন হবে।

**কত ভাবে Ceph Storage সেটআপ করা যাই:**

Ceph Storage বিভিন্ন উপায়ে সেটআপ করা যেতে পারে, যার মধ্যে কয়েকটি প্রধান পদ্ধতি নিচে উল্লেখ করা হলো:

1. **ম্যানুয়াল ডেপ্লয়মেন্ট:** প্রতিটি কম্পোনেন্ট (Monitor, OSD, MDS ইত্যাদি) আলাদাভাবে প্রতিটি সার্ভারে কনফিগার করা। এটি সবচেয়ে জটিল পদ্ধতি এবং এর জন্য Ceph সম্পর্কে গভীর জ্ঞান থাকা প্রয়োজন।
    
2. **Cephadm:** এটি Ceph এর নিজস্ব কমান্ড-লাইন ইন্টারফেস যা কন্টেইনারের মাধ্যমে Ceph ক্লাস্টার ডেপ্লয় এবং ম্যানেজ করার জন্য ডিজাইন করা হয়েছে। এটি তুলনামূলকভাবে সহজ এবং আধুনিক পদ্ধতি।
    
3. **Ansible:** Ansible প্লেবুক ব্যবহার করে স্বয়ংক্রিয়ভাবে Ceph ক্লাস্টার ডেপ্লয় করা যায়। এটি বড় আকারের ডেপ্লয়মেন্টের জন্য উপযোগী।
    
4. **Orchestrator (যেমন Rook):** Kubernetes এর মধ্যে Ceph ক্লাস্টার ডেপ্লয় এবং ম্যানেজ করার জন্য Rook একটি জনপ্রিয় Orchestrator।
    
5. **গ্রাফিক্যাল ইউজার ইন্টারফেস (GUI):** কিছু থার্ড-পার্টি GUI টুলস (যেমন Calamari, যদিও এটি এখন আর সক্রিয়ভাবে ডেভেলপ করা হয় না) Ceph ক্লাস্টার ম্যানেজমেন্টের জন্য উপলব্ধ রয়েছে। তবে, কমান্ড-লাইন ইন্টারফেসের মাধ্যমেই সম্পূর্ণ নিয়ন্ত্রণ পাওয়া যায়।
    

হোম ল্যাবের জন্য, **Cephadm** ব্যবহার করা সাধারণত সবচেয়ে সহজ এবং আধুনিক পদ্ধতি।

**কিভাবে হোম ল্যাবে Ceph Storage সেটআপ করবো (Cephadm ব্যবহার করে):**

হোম ল্যাবে Ceph Storage সেটআপ করার জন্য নিম্নলিখিত পদক্ষেপগুলি অনুসরণ করতে পারেন (Cephadm পদ্ধতির উপর ভিত্তি করে):

1. **প্রস্তুতি:**
    
    - আপনার ন্যূনতম ৩টি সার্ভার প্রস্তুত করুন এবং নিশ্চিত করুন যে তাদের মধ্যে নেটওয়ার্ক সংযোগ আছে।
        
    - প্রতিটি সার্ভারে একটি সাম্প্রতিক লিনাক্স ডিস্ট্রিবিউশন (যেমন Ubuntu 20.04 বা তার পরের সংস্করণ) ইনস্টল করুন।
        
    - নিশ্চিত করুন যে প্রতিটি সার্ভারে `python3` এবং `ssh` ইনস্টল করা আছে।
        
    - প্রতিটি সার্ভারে একই টাইমজোন কনফিগার করুন।
        
    - হোস্টনামগুলি সঠিকভাবে কনফিগার করুন এবং নিশ্চিত করুন যে প্রতিটি সার্ভার একে অপরের হোস্টনাম ব্যবহার করে অ্যাক্সেস করতে পারে (হয় `/etc/hosts` ফাইলে এন্ট্রি যোগ করে অথবা একটি DNS সার্ভার ব্যবহার করে)।
        
    - পাসওয়ার্ডবিহীন SSH অ্যাক্সেস প্রতিটি সার্ভারের মধ্যে কনফিগার করুন (একটি কন্ট্রোল নোড থেকে অন্যান্য নোডগুলিতে)।
        
2. **Cephadm ইনস্টল করা (কন্ট্রোল নোডে):**
    
    - আপনার ক্লাস্টারের জন্য একটি কন্ট্রোল নোড নির্বাচন করুন (সাধারণত প্রথম সার্ভার)।
        
    - কন্ট্রোল নোডে নিম্নলিখিত কমান্ডগুলি চালান:
        
        Bash
        
        ```
        sudo apt update
        sudo apt install -y ca-certificates curl gnupg
        sudo mkdir -p /etc/apt/keyrings
        curl -fsSL https://download.ceph.com/keys/release.asc | sudo gpg --dearmor -o /etc/apt/keyrings/ceph.gpg
        echo deb [signed-by=/etc/apt/keyrings/ceph.gpg] https://download.ceph.com/debian-quincy/ $(lsb_release -sc) main non-free | sudo tee /etc/apt/sources.list.d/ceph.sources
        sudo apt update
        sudo apt install -y cephadm
        sudo usermod -aG sudo $USER
        newgrp sudo
        ```
        
    - Cephadm বুটস্ট্র্যাপ করার জন্য নিম্নলিখিত কমান্ড চালান (আপনার নেটওয়ার্ক ইন্টারফেস এবং প্রাথমিক মনিটরের IP ঠিকানা দিয়ে প্রতিস্থাপন করুন):
        
        Bash
        
        ```
        sudo cephadm bootstrap --mon-ip <কন্ট্রোল নোডের আইপি> --initial-dashboard-user <ড্যাশবোর্ড ইউজার> --initial-dashboard-password <ড্যাশবোর্ড পাসওয়ার্ড>
        ```
        
3. **অন্যান্য নোড যোগ করা:**
    
    - কন্ট্রোল নোডে একটি নতুন নোড যোগ করার জন্য একটি কমান্ড তৈরি করুন:
        
        Bash
        
        ```
        sudo cephadm add-host --fsid <আপনার ক্লাস্টারের FSID> <নতুন নোডের হোস্টনাম বা আইপি>
        ```
        
        `<আপনার ক্লাস্টারের FSID>` আপনি বুটস্ট্র্যাপ কমান্ডের আউটপুটে পাবেন।
        
    - এই কমান্ডটি প্রতিটি নতুন নোডে চালান। এটি কন্ট্রোল নোড থেকে নতুন নোডে Ceph প্যাকেজ ইনস্টল করবে।
        
4. **OSD ডেপ্লয় করা:**
    
    - OSD ডেপ্লয় করার জন্য, আপনাকে উপলব্ধ ডিস্কগুলি সনাক্ত করতে হবে। কন্ট্রোল নোডে নিম্নলিখিত কমান্ড চালান:
        
        Bash
        
        ```
        sudo cephadm ls-available-devices
        ```
        
    - OSD ডেপ্লয় করার জন্য নিম্নলিখিত কমান্ড চালান (আপনার ডিভাইসের পাথগুলি দিয়ে প্রতিস্থাপন করুন):
        
        Bash
        
        ```
        sudo cephadm deploy osd --device /dev/<ডিস্কের পাথ>
        ```
        
        আপনি একাধিক ডিস্ক এবং একাধিক হোস্টের জন্য এই কমান্ডটি পুনরাবৃত্তি করতে পারেন।
        
5. **মনিটর ডেপ্লয় করা (যদি প্রয়োজন হয়):**
    
    - বুটস্ট্র্যাপ কমান্ডের মাধ্যমে একটি মনিটর ইতিমধ্যেই ডেপ্লয় করা হয়েছে। যদি আপনি আরও মনিটর যোগ করতে চান (উচ্চ স্থিতিশীলতার জন্য সুপারিশ করা হয়), নিম্নলিখিত কমান্ড চালান:
        
        Bash
        
        ```
        sudo cephadm deploy mon <অন্য নোডের হোস্টনাম বা আইপি>
        ```
        
6. **MDS ডেপ্লয় করা (CephFS এর জন্য):**
    
    - যদি আপনি Ceph File System ব্যবহার করতে চান, তাহলে MDS ডেপ্লয় করুন:
        
        Bash
        
        ```
        sudo cephadm deploy mds <কোন OSD নোডের হোস্টনাম বা আইপি>
        ```
        
7. **ড্যাশবোর্ড অ্যাক্সেস করা:**
    
    - বুটস্ট্র্যাপ প্রক্রিয়ার সময় আপনি যে IP ঠিকানা এবং পোর্ট পেয়েছেন সেটি ব্যবহার করে ওয়েব ব্রাউজারে Ceph ড্যাশবোর্ড অ্যাক্সেস করুন (সাধারণত `https://<কন্ট্রোল নোডের আইপি>:8443`)। আপনার তৈরি করা ইউজারনাম এবং পাসওয়ার্ড দিয়ে লগইন করুন।
        

**কিভাবে হোম ল্যাবে Ceph Storage কনফিগারেশন করবো:**

Ceph Storage কনফিগার করার জন্য বিভিন্ন দিক রয়েছে। এখানে কিছু মৌলিক কনফিগারেশন ধাপ উল্লেখ করা হলো:

1. **পুল তৈরি করা:**
    
    - পুল হল লজিক্যাল স্টোরেজ ইউনিট যেখানে ডেটা সংরক্ষণ করা হয়। বিভিন্ন ব্যবহারের ক্ষেত্রে (যেমন ব্লক ডিভাইস, অবজেক্ট স্টোরেজ, ফাইল সিস্টেম) আলাদা পুল তৈরি করা উচিত।
        
    - Ceph ড্যাশবোর্ড ব্যবহার করে অথবা কমান্ড-লাইন ইন্টারফেস (CLI) ব্যবহার করে পুল তৈরি করা যায়:
        
        Bash
        
        ```
        sudo ceph osd pool create <পুলের নাম> <প্লেসমেন্ট গ্রুপের সংখ্যা> <প্লেসমেন্ট গ্রুপের সংখ্যা> replicated
        ```
        
        প্লেসমেন্ট গ্রুপের সংখ্যা OSD-এর সংখ্যার উপর নির্ভর করে। ছোট ল্যাবের জন্য `32` বা `64` দিয়ে শুরু করতে পারেন। `replicated` ডেটা প্রতিলিপি করার জন্য ব্যবহৃত হয়।
        
2. **রেপ্লিকেশন কনফিগার করা:**
    
    - পুল তৈরির সময় আপনি রেপ্লিকেশন ফ্যাক্টর নির্ধারণ করতে পারেন (যেমন `replicated size 3` মানে ডেটার ৩টি কপি তৈরি হবে)।
        
    - আপনি পুলের সেটিংস পরিবর্তন করেও রেপ্লিকেশন কনফিগার করতে পারেন:
        
        Bash
        
        ```
        sudo ceph osd pool set <পুলের নাম> size <রেপ্লিকেশন ফ্যাক্টর>
        ```
        
3. **ক্রাশ ম্যাপ কনফিগার করা:**
    
    - ক্রাশ ম্যাপ (CRUSH Map) নির্ধারণ করে ডেটা OSD জুড়ে কীভাবে বিতরণ করা হবে। এটি ফল্ট ডোমেন (যেমন হোস্ট, র‍্যাক, রুম) সম্পর্কে তথ্য ধারণ করে, যা ডেটা প্লেসমেন্ট এবং পুনরুদ্ধারের সময় ডেটা লোকালিটি নিশ্চিত করতে সাহায্য করে।
        
    - হোম ল্যাবের জন্য ডিফল্ট ক্রাশ ম্যাপ সাধারণত যথেষ্ট। তবে, আরও উন্নত কনফিগারেশনের জন্য আপনাকে ক্রাশ ম্যাপ এডিট করতে হতে পারে:
        
        Bash
        
        ```
        sudo ceph osd getcrushmap -o crushmap
        # crushmap ফাইল এডিট করুন
        sudo ceph osd setcrushmap -i crushmap
        ```
        
4. **কোটা নির্ধারণ করা (ঐচ্ছিক):**
    
    - পুল বা ব্যবহারকারীর জন্য স্টোরেজ ব্যবহারের সীমা নির্ধারণ করা যেতে পারে:
        
        Bash
        
        ```
        sudo ceph osd pool setquota <পুলের নাম> max_objects <সংখ্যা>
        sudo ceph osd pool setquota <পুলের নাম> max_bytes <বাইটের সংখ্যা>
        ```
        
5. **ব্লক স্টোরেজ (RBD) তৈরি এবং ব্যবহার করা:**
    
    - RBD (RADOS Block Device) ব্যবহার করে ভার্চুয়াল ডিস্ক তৈরি করা যায় যা ভার্চুয়াল মেশিন বা অন্যান্য অ্যাপ্লিকেশনের সাথে সংযুক্ত করা যেতে পারে:
        
        Bash
        
        ```
        sudo rbd create --size <সাইজ_জিবি>G <পুল>/<ইমেজ_নাম>
        sudo rbd map <পুল>/<ইমেজ_নাম> --pool <পুল>
        # এখন /dev/rbd/<পুল>/<ইমেজ_নাম> একটি ব্লক ডিভাইস হিসেবে উপলব্ধ
        # ফাইলসিস্টেম তৈরি এবং মাউন্ট করুন
        sudo mkfs.ext4 /dev/rbd/<পুল>/<ইমেজ_নাম>
        sudo mount /dev/rbd/<পুল>/<ইমেজ_নাম> /mnt
        sudo rbd unmap /dev/rbd/<পুল>/<ইমেজ_নাম>
        ```
        
6. **অবজেক্ট স্টোরেজ (RGW) কনফিগার করা (ঐচ্ছিক):**
    
    - RGW (RADOS Gateway) একটি S3 এবং OpenStack Swift সামঞ্জস্যপূর্ণ অবজেক্ট স্টোরেজ ইন্টারফেস প্রদান করে। এটি ডেপ্লয় করার জন্য:
        
        Bash
        
        ```
        sudo cephadm deploy rgw <হোস্টনাম বা আইপি> --realm default --rgw-frontend-port 8080
        ```
        
    - ব্যবহারকারী এবং বালতি তৈরি করার জন্য `radosgw-admin` কমান্ড ব্যবহার করুন।
        
7. **ফাইল সিস্টেম (CephFS) কনফিগার করা (ঐচ্ছিক):**
    
    - CephFS একটি ডিস্ট্রিবিউটেড ফাইল সিস্টেম যা একাধিক ক্লায়েন্ট একই সাথে অ্যাক্সেস করতে পারে:
        
        Bash
        
        ```
        sudo ceph fs volume create <ফাইলসিস্টেমের নাম> --pool_layout replicated --data_pool_layout replicated
        ```
        
    - ক্লায়েন্ট মেশিনে CephFS মাউন্ট করার জন্য `ceph-fuse` ব্যবহার করতে পারেন।
        
8. **মনিটরিং এবং অ্যালার্মিং:**
    
    - Ceph ড্যাশবোর্ড ক্লাস্টারের স্বাস্থ্য এবং কর্মক্ষমতা নিরীক্ষণের জন্য একটি গ্রাফিক্যাল ইন্টারফেস প্রদান করে।
        
    - আপনি Prometheus এবং Grafana এর সাথে Ceph ইন্টিগ্রেট করে আরও উন্নত মনিটরিং এবং অ্যালার্মিং সেটআপ করতে পারেন।
        

এইগুলি Ceph Storage সেটআপ এবং কনফিগারেশনের মূল ধাপ। আপনার নির্দিষ্ট ব্যবহারের ক্ষেত্রে এবং হার্ডওয়্যারের উপর নির্ভর করে আরও অনেক উন্নত কনফিগারেশন অপশন উপলব্ধ রয়েছে।

হোম ল্যাবে Ceph শেখা একটি চমৎকার অভিজ্ঞতা হতে পারে। ধৈর্য ধরুন এবং ধাপে ধাপে অগ্রসর হন। প্রয়োজনে Ceph ডকুমেন্টেশন এবং অনলাইন রিসোর্স ব্যবহার করতে দ্বিধা করবেন না। শুভকামনা!

---

```
Ceph Storage কি VM এ সেটআপ করা যাই না কি physical machine এ সেটআপ করতে হয়?Ceph Storage কি ডকার বা কুবারনেটস এ রান করা যাই? Ceph Storage কি একটি machine এ সেটআপ করা যাই?  
```

আপনার প্রশ্নগুলোর উত্তর নিচে দেওয়া হলো:

**Ceph Storage কি VM এ সেটআপ করা যাই না কি physical machine এ সেটআপ করতে হয়?**

হ্যাঁ, Ceph Storage ভার্চুয়াল মেশিনে (VM) সেটআপ করা যায়। এটি ডেভেলপার এবং টেস্টারদের জন্য একটি সাধারণ প্র্যাকটিস, বিশেষ করে হোম ল্যাব বা টেস্টিং এনভায়রনমেন্টে। ভার্চুয়াল মেশিনে সেটআপ করার সুবিধা হলো আপনার ডেডিকেটেড ফিজিক্যাল মেশিনের প্রয়োজন হয় না এবং রিসোর্স ম্যানেজমেন্ট আরও নমনীয় হতে পারে।

তবে, প্রোডাকশন এনভায়রনমেন্টের জন্য সাধারণত ফিজিক্যাল মেশিন ব্যবহারের পরামর্শ দেওয়া হয়। এর কারণ হলো:

- **কর্মক্ষমতা (Performance):** ভার্চুয়ালাইজেশন লেয়ারের কারণে কিছু কর্মক্ষমতা হ্রাস হতে পারে। ফিজিক্যাল মেশিনে Ceph সরাসরি হার্ডওয়্যারের সাথে ইন্টারঅ্যাক্ট করতে পারে, যা সাধারণত ভালো কর্মক্ষমতা প্রদান করে।
    
- **রিসোর্স আইসোলেশন (Resource Isolation):** ফিজিক্যাল মেশিনে প্রতিটি Ceph নোডের জন্য ডেডিকেটেড রিসোর্স (CPU, RAM, ডিস্ক) থাকে। ভার্চুয়াল মেশিনে রিসোর্স শেয়ারিং এর কারণে কর্মক্ষমতা প্রভাবিত হতে পারে।
    
- **ডিস্ক অ্যাক্সেস (Disk Access):** Ceph OSD-এর জন্য সরাসরি ডিস্ক অ্যাক্সেস প্রয়োজন। ভার্চুয়াল মেশিনে ডিস্ক অ্যাক্সেস হোস্ট অপারেটিং সিস্টেমের মাধ্যমে মধ্যস্থতা করতে পারে, যা জটিলতা এবং সম্ভাব্য কর্মক্ষমতা সমস্যা তৈরি করতে পারে।
    

হোম ল্যাবে শেখা এবং পরীক্ষা করার জন্য VM একটি ভালো বিকল্প। তবে, যদি আপনি উচ্চ কর্মক্ষমতা এবং স্থিতিশীলতা চান, তাহলে ফিজিক্যাল মেশিন ব্যবহার করা উচিত।

**Ceph Storage কি ডকার বা কুবারনেটস এ রান করা যাই?**

হ্যাঁ, Ceph Storage ডকার (Docker) এবং কুবারনেটস (Kubernetes) উভয় প্ল্যাটফর্মেই রান করা যায়।

- **ডকার (Docker):** Ceph কম্পোনেন্টগুলিকে (যেমন Monitor, OSD, MDS, RGW) ডকার কন্টেইনারের মধ্যে প্যাকেজ করে রান করা সম্ভব। এটি ডেপ্লয়মেন্ট এবং ম্যানেজমেন্টকে কিছুটা সহজ করতে পারে, বিশেষ করে ডেভেলপমেন্ট এবং টেস্টিং এনভায়রনমেন্টে।
    
- **কুবারনেটস (Kubernetes):** কুবারনেটস হলো একটি শক্তিশালী কন্টেইনার অর্কেস্ট্রেশন প্ল্যাটফর্ম। Rook হলো একটি ওপেন-সোর্স ক্লাউড-নেটিভ স্টোরেজ অর্কেস্ট্রেটর যা কুবারনেটস ক্লাস্টারের মধ্যে Ceph ডেপ্লয় এবং ম্যানেজ করার জন্য বিশেষভাবে ডিজাইন করা হয়েছে। Rook ব্যবহার করে, আপনি কুবারনেটস কন্ট্রোল প্লেন ব্যবহার করে স্বয়ংক্রিয়ভাবে Ceph ক্লাস্টার স্থাপন, স্কেল এবং আপগ্রেড করতে পারেন। কুবারনেটস-এর সাথে Ceph ইন্টিগ্রেশন ক্রমশ জনপ্রিয় হচ্ছে, বিশেষ করে ক্লাউড-নেটিভ অ্যাপ্লিকেশনগুলির জন্য।
    

ডকার এবং কুবারনেটস উভয়ই Ceph ডেপ্লয়মেন্টের জন্য সুবিধা নিয়ে আসে, যেমন দ্রুত ডেপ্লয়মেন্ট, স্কেলেবিলিটি এবং ম্যানেজমেন্টের সুবিধা। তবে, এর জন্য ডকার এবং কুবারনেটস সম্পর্কে ভালো ধারণা থাকা প্রয়োজন।

**Ceph Storage কি একটি machine এ সেটআপ করা যাই?**

প্র technically, একটি সিঙ্গেল মেশিনে Ceph Storage এর কিছু কম্পোনেন্ট সেটআপ করা সম্ভব, বিশেষ করে ডেভেলপমেন্ট বা টেস্টিং এর উদ্দেশ্যে। আপনি একটি মেশিনে একাধিক OSD, একটি Monitor এবং অন্যান্য কম্পোনেন্ট রান করতে পারেন।

তবে, Ceph এর মূল সুবিধা - ডেটা রেপ্লিকেশন, ফল্ট টলারেন্স এবং স্কেলেবিলিটি - একটি সিঙ্গেল মেশিনে সম্পূর্ণরূপে উপলব্ধি করা যায় না। Ceph ডিজাইন করা হয়েছে একাধিক নোডের একটি ডিস্ট্রিবিউটেড সিস্টেম হিসেবে কাজ করার জন্য।

একটি সিঙ্গেল মেশিনে Ceph সেটআপ করার কিছু সীমাবদ্ধতা:

- **ফল্ট টলারেন্স (Fault Tolerance):** যদি সিঙ্গেল মেশিনটি ফেইল করে, আপনার সমস্ত ডেটা অ্যাক্সেসযোগ্য হবে না। Ceph এর ডেটা রেপ্লিকেশন এবং ডিস্ট্রিবিউশন মেকানিজম একাধিক নোডের উপর নির্ভর করে।
    
- **স্কেলেবিলিটি (Scalability):** একটি সিঙ্গেল মেশিনের রিসোর্স সীমাবদ্ধ থাকে। আপনি সহজেই স্টোরেজ বা কর্মক্ষমতা বাড়াতে পারবেন না যেমন আপনি একাধিক নোডের ক্লাস্টারে পারেন।
    
- **কর্মক্ষমতা (Performance):** একটি সিঙ্গেল মেশিনে একাধিক OSD একই ডিস্ক সাবসিস্টেমের জন্য প্রতিযোগিতা করবে, যা কর্মক্ষমতাকে প্রভাবিত করতে পারে।
    

সুতরাং, যদিও একটি সিঙ্গেল মেশিনে Ceph এর ধারণা এবং কিছু বেসিক ফাংশনালিটি পরীক্ষা করা সম্ভব, প্রোডাকশন বা নির্ভরযোগ্য ব্যবহারের জন্য কমপক্ষে তিনটি নোডের একটি ক্লাস্টার সুপারিশ করা হয়। হোম ল্যাবে শেখার জন্য, আপনি হয়তো একটি শক্তিশালী মেশিনে ভার্চুয়াল মেশিন ব্যবহার করে মাল্টি-নোড ক্লাস্টার সিমুলেট করতে পারেন।

---

```
আমাকে একটি ম্যাশিনে Ceph Storage সেটআপ করার সম্পূর্ণ ধাপ দিবেন এবং তারপরে ২ টি ম্যাশিনে ও তিনটি ম্যাশিনের কিভাবে Ceph Storage সেটআপ করা যাই তাই ধাপে-ধাপে গাইডলাইন দিবেন।

তারপরে ধাপে-ধাপে ডকারের মাধ্যমে কিভাবে Ceph Storage রান করা যাই তার গাইডলাইন দিবেন।
```

#### একটি মেশিনে Ceph Storage সেটআপ করার ধাপ (শুধুমাত্র টেস্টিং এবং ডেভেলপমেন্টের জন্য):

**সতর্কতা:** একটি মেশিনে Ceph সেটআপ করা শুধুমাত্র শেখা এবং প্রাথমিক পরীক্ষার জন্য উপযুক্ত। এটি ডেটা রেপ্লিকেশন বা ফল্ট টলারেন্স প্রদান করবে না।

1. **প্রস্তুতি:**
    
    - আপনার মেশিনে একটি লিনাক্স ডিস্ট্রিবিউশন (যেমন Ubuntu) ইনস্টল করা থাকতে হবে।
        
    - নিশ্চিত করুন যে আপনার মেশিনে `python3`, `ssh`, এবং `sudo` ইনস্টল করা আছে।
        
    - হোস্টনাম সঠিকভাবে কনফিগার করুন।
        
2. **Cephadm ইনস্টল করা:**
    
    Bash
    
    ```
    sudo apt update
    sudo apt install -y ca-certificates curl gnupg
    sudo mkdir -p /etc/apt/keyrings
    curl -fsSL https://download.ceph.com/keys/release.asc | sudo gpg --dearmor -o /etc/apt/keyrings/ceph.gpg
    echo deb [signed-by=/etc/apt/keyrings/ceph.gpg] https://download.ceph.com/debian-quincy/ $(lsb_release -sc) main non-free | sudo tee /etc/apt/sources.list.d/ceph.sources
    sudo apt update
    sudo apt install -y cephadm
    sudo usermod -aG sudo $USER
    newgrp sudo
    ```
    
3. **Cephadm বুটস্ট্র্যাপ করা:**
    
    Bash
    
    ```
    sudo cephadm bootstrap --mon-ip $(hostname -I | awk '{print $1}') --initial-dashboard-user admin --initial-dashboard-password mysecretpassword
    ```
    
    এখানে `$(hostname -I | awk '{print $1}')` আপনার মেশিনের আইপি ঠিকানা স্বয়ংক্রিয়ভাবে নির্ধারণ করবে। আপনি `--initial-dashboard-user` এবং `--initial-dashboard-password` আপনার পছন্দসই ইউজারনেম এবং পাসওয়ার্ড দিয়ে পরিবর্তন করতে পারেন।
    
4. **OSD ডেপ্লয় করা:**
    
    - আপনার মেশিনে কমপক্ষে একটি অব্যবহৃত ডিস্ক থাকতে হবে। উপলব্ধ ডিস্কগুলি দেখতে নিম্নলিখিত কমান্ড চালান:
        
        Bash
        
        ```
        lsblk
        ```
        
    - OSD ডেপ্লয় করার জন্য নিম্নলিখিত কমান্ড চালান ( `/dev/sdb` কে আপনার অব্যবহৃত ডিস্কের পাথ দিয়ে প্রতিস্থাপন করুন):
        
        Bash
        
        ```
        sudo cephadm deploy osd --device /dev/sdb
        ```
        
        যদি আপনার একাধিক ডিস্ক থাকে, আপনি `--device` অপশনটি একাধিকবার ব্যবহার করতে পারেন।
        
5. **ড্যাশবোর্ড অ্যাক্সেস করা:**
    
    - বুটস্ট্র্যাপ প্রক্রিয়ার শেষে ড্যাশবোর্ডের URL (সাধারণত `https://<আপনার মেশিনের আইপি>:8443`) প্রদর্শিত হবে। ব্রাউজারে এটি খুলুন এবং আপনার সেট করা ইউজারনেম এবং পাসওয়ার্ড দিয়ে লগইন করুন।
        

আপনার একটি মেশিনে একটি বেসিক Ceph সেটআপ সম্পন্ন হয়েছে। আপনি এখন পুল তৈরি করতে এবং RBD ইমেজ তৈরি করে পরীক্ষা করতে পারেন।

## দুটি মেশিনে Ceph Storage সেটআপ করার গাইডলাইন:

1. **প্রস্তুতি (উভয় মেশিনে):**
    
    - দুটি লিনাক্স মেশিন (যেমন `node1` এবং `node2`) প্রস্তুত করুন।
        
    - উভয় মেশিনে `python3`, `ssh`, এবং `sudo` ইনস্টল করা থাকতে হবে।
        
    - উভয় মেশিনে একই টাইমজোন কনফিগার করুন।
        
    - হোস্টনামগুলি সঠিকভাবে কনফিগার করুন এবং নিশ্চিত করুন যে প্রতিটি মেশিন একে অপরের হোস্টনাম ব্যবহার করে অ্যাক্সেস করতে পারে (হয় `/etc/hosts` ফাইলে এন্ট্রি যোগ করে অথবা একটি DNS সার্ভার ব্যবহার করে)।
        
    - পাসওয়ার্ডবিহীন SSH অ্যাক্সেস `node1` থেকে `node2` এবং `node2` থেকে `node1`-এ কনফিগার করুন।
        
2. **Cephadm ইনস্টল করা (উভয় মেশিনে):**
    
    - আগের মতো একই Cephadm ইনস্টলেশন কমান্ড উভয় মেশিনে চালান।
        
3. **Cephadm বুটস্ট্র্যাপ করা (একটি মেশিনে - `node1`):**
    
    Bash
    
    ```
    sudo cephadm bootstrap --mon-ip <node1 এর আইপি> --initial-dashboard-user admin --initial-dashboard-password mysecretpassword
    ```
    
4. **দ্বিতীয় হোস্ট যোগ করা (`node1` থেকে):**
    
    - `node1`-এ নিম্নলিখিত কমান্ড চালান ( `<node2 এর হোস্টনাম বা আইপি>` দিয়ে `node2`-এর হোস্টনাম বা আইপি প্রতিস্থাপন করুন):
        
        Bash
        
        ```
        sudo cephadm add-host <node2 এর হোস্টনাম বা আইপি>
        ```
        
5. **OSD ডেপ্লয় করা (উভয় মেশিনে):**
    
    - উভয় মেশিনে উপলব্ধ ডিস্কগুলি সনাক্ত করুন:
        
        Bash
        
        ```
        ssh <node1 এর হোস্টনাম বা আইপি> sudo cephadm ls-available-devices
        ssh <node2 এর হোস্টনাম বা আইপি> sudo cephadm ls-available-devices
        ```
        
    - OSD ডেপ্লয় করার জন্য `node1` থেকে কমান্ড চালান ( `/dev/sdb` এবং `<node2 এর হোস্টনাম>` কে আপনার ডিস্কের পাথ এবং হোস্টনাম দিয়ে প্রতিস্থাপন করুন):
        
        Bash
        
        ```
        sudo cephadm deploy osd --device /dev/sdb -i <node1 এর হোস্টনাম বা আইপি>
        sudo cephadm deploy osd --device /dev/sdb -i <node2 এর হোস্টনাম বা আইপি>
        ```
        
        যদি প্রতিটি মেশিনে একাধিক ডিস্ক থাকে, আপনি `--device` অপশনটি একাধিকবার ব্যবহার করতে পারেন।
        
6. **ড্যাশবোর্ড অ্যাক্সেস করা:**
    
    - বুটস্ট্র্যাপ মেশিনের IP ঠিকানা ব্যবহার করে ড্যাশবোর্ড অ্যাক্সেস করুন (`https://<node1 এর আইপি>:8443`)।
        

এই সেটআপে, আপনার দুটি OSD এবং একটি মনিটর থাকবে (প্রথম মেশিনে)। এটি কিছু বেসিক ডেটা রেপ্লিকেশন সমর্থন করবে, তবে উচ্চ স্থিতিশীলতার জন্য আরও মনিটরের প্রয়োজন।

## তিনটি মেশিনে Ceph Storage সেটআপ করার গাইডলাইন:

1. **প্রস্তুতি (তিনটি মেশিনে):**
    
    - তিনটি লিনাক্স মেশিন (যেমন `node1`, `node2`, `node3`) প্রস্তুত করুন।
        
    - আগের মতো প্রয়োজনীয় সফ্টওয়্যার ইনস্টল করুন, টাইমজোন কনফিগার করুন, হোস্টনাম সেট করুন এবং পাসওয়ার্ডবিহীন SSH অ্যাক্সেস কনফিগার করুন (প্রত্যেকটি মেশিন একে অপরের সাথে)।
        
2. **Cephadm ইনস্টল করা (তিনটি মেশিনে):**
    
    - আগের মতো একই Cephadm ইনস্টলেশন কমান্ড তিনটি মেশিনে চালান।
        
3. **Cephadm বুটস্ট্র্যাপ করা (একটি মেশিনে - `node1`):**
    
    Bash
    
    ```
    sudo cephadm bootstrap --mon-ip <node1 এর আইপি> --initial-dashboard-user admin --initial-dashboard-password mysecretpassword
    ```
    
4. **অন্যান্য হোস্ট যোগ করা (`node1` থেকে):**
    
    Bash
    
    ```
    sudo cephadm add-host <node2 এর হোস্টনাম বা আইপি>
    sudo cephadm add-host <node3 এর হোস্টনাম বা আইপি>
    ```
    
5. **মনিটর ডেপ্লয় করা (`node1` থেকে):**
    
    - উচ্চ স্থিতিশীলতার জন্য বিজোড় সংখ্যক মনিটর (যেমন ৩টি) সুপারিশ করা হয়। প্রথম মনিটরটি বুটস্ট্র্যাপের সময় ডেপ্লয় হয়েছে। এখন আরও দুটি ডেপ্লয় করুন:
        
        Bash
        
        ```
        sudo cephadm deploy mon <node2 এর হোস্টনাম বা আইপি>
        sudo cephadm deploy mon <node3 এর হোস্টনাম বা আইপি>
        ```
        
6. **OSD ডেপ্লয় করা (তিনটি মেশিনে):**
    
    - তিনটি মেশিনে উপলব্ধ ডিস্কগুলি সনাক্ত করুন:
        
        Bash
        
        ```
        ssh <node1 এর হোস্টনাম বা আইপি> sudo cephadm ls-available-devices
        ssh <node2 এর হোস্টনাম বা আইপি> sudo cephadm ls-available-devices
        ssh <node3 এর হোস্টনাম বা আইপি> sudo cephadm ls-available-devices
        ```
        
    - OSD ডেপ্লয় করার জন্য `node1` থেকে কমান্ড চালান (আপনার ডিস্কের পাথ এবং হোস্টনাম দিয়ে প্রতিস্থাপন করুন):
        
        Bash
        
        ```
        sudo cephadm deploy osd --device /dev/sdb -i <node1 এর হোস্টনাম বা আইপি>
        sudo cephadm deploy osd --device /dev/sdb -i <node2 এর হোস্টনাম বা আইপি>
        sudo cephadm deploy osd --device /dev/sdb -i <node3 এর হোস্টনাম বা আইপি>
        ```
        
        প্রয়োজনে `--device` অপশনটি একাধিকবার ব্যবহার করুন।
        
7. **ড্যাশবোর্ড অ্যাক্সেস করা:**
    
    - বুটস্ট্র্যাপ মেশিনের IP ঠিকানা ব্যবহার করে ড্যাশবোর্ড অ্যাক্সেস করুন (`https://<node1 এর আইপি>:8443`)।
        

এই সেটআপটি একটি ন্যূনতম ফল্ট-টলারেণ্ট Ceph ক্লাস্টার তৈরি করবে যেখানে তিনটি মনিটর এবং তিনটি OSD থাকবে।

## ডকারের মাধ্যমে Ceph Storage রান করার গাইডলাইন:

ডকারের মাধ্যমে Ceph রান করা সাধারণত ডেভেলপমেন্ট এবং টেস্টিং এর জন্য ব্যবহৃত হয়, প্রোডাকশনের জন্য নয়। এখানে একটি বেসিক গাইডলাইন দেওয়া হলো:

1. **ডকার এবং ডকার কম্পোজ ইনস্টল করা:**
    
    - আপনার মেশিনে ডকার এবং ডকার কম্পোজ ইনস্টল করুন। উবুন্টুতে ইনস্টল করার জন্য:
        
        Bash
        
        ```
        sudo apt update
        sudo apt install -y docker.io docker-compose
        sudo systemctl start docker
        sudo systemctl enable docker
        ```
        
2. **ডকার কম্পোজ ফাইল তৈরি করা (`docker-compose.yaml`):**
    
    - একটি নতুন ডিরেক্টরি তৈরি করুন এবং তার মধ্যে `docker-compose.yaml` নামে একটি ফাইল তৈরি করুন।
        
    - নিম্নলিখিত কনফিগারেশনটি `docker-compose.yaml` ফাইলে পেস্ট করুন (এটি একটি সিঙ্গেল-নোড Ceph ক্লাস্টার তৈরি করবে):
        
    
    YAML
    
    ```
    version: '3.8'
    services:
      monitor:
        image: ceph/daemon:latest-quincy
        container_name: monitor
        hostname: monitor
        ports:
          - "6789:6789"
        volumes:
          - ceph_mon_data:/var/lib/ceph/mon/ceph-monitor
        networks:
          ceph_net:
            ipv4_address: 172.20.0.10
    
      osd:
        image: ceph/daemon:latest-quincy
        container_name: osd
        hostname: osd
        depends_on:
          - monitor
        environment:
          - CEPH_MON_IP=172.20.0.10
          - CEPH_VOLUME=/var/lib/ceph/osd/ceph-0
        volumes:
          - ceph_osd_data:/var/lib/ceph/osd/ceph-0
          - /dev:/dev # হোস্ট ডিভাইসের অ্যাক্সেসের জন্য
        devices:
          - /dev/sdb:/dev/sdb # আপনার ডেডিকেটেড ডিস্কের পাথ
        networks:
          ceph_net:
            ipv4_address: 172.20.0.20
        privileged: true # OSD-এর জন্য ডিভাইসের সাথে ইন্টারঅ্যাক্ট করার অনুমতি
    
      mgr:
        image: ceph/daemon:latest-quincy
        container_name: mgr
        hostname: mgr
        depends_on:
          - monitor
          - osd
        ports:
          - "8080:8080" # Ceph Manager ড্যাশবোর্ডের জন্য
        environment:
          - CEPH_MON_IP=172.20.0.10
          - CEPH_MGR_MODULES=dashboard
          - CEPH_MGR_DASHBOARD_BIND_PORT=8080
          - CEPH_MGR_DASHBOARD_SSL=off
        volumes:
          - ceph_mgr_data:/var/lib/ceph/mgr/ceph-mgr
        networks:
          ceph_net:
            ipv4_address: 172.20.0.30
    
    networks:
      ceph_net:
        ipam:
          driver: default
          config:
            - subnet: 172.20.0.0/24
    
    volumes:
      ceph_mon_data:
      ceph_osd_data:
      ceph_mgr_data:
    ```
    
    **দ্রষ্টব্য:**
    
    - `/dev/sdb:/dev/sdb` - `/dev/sdb` কে আপনার মেশিনের একটি অব্যবহৃত ডিস্কের পাথ দিয়ে পরিবর্তন করুন যা OSD-এর জন্য ব্যবহৃত হবে।
        
    - `CEPH_MON_IP` - মনিটরের IP ঠিকানা।
        
    - `ports` - মনিটর এবং ম্যানেজারের জন্য পোর্ট ম্যাপিং।
        
    - `privileged: true` - OSD কন্টেইনারের জন্য ডিভাইসের সাথে ইন্টারঅ্যাক্ট করার অনুমতি।
        
3. **Ceph ক্লাস্টার শুরু করা:**
    
    - যে ডিরেক্টরিতে `docker-compose.yaml` ফাইলটি রেখেছেন, সেখানে টার্মিনাল খুলুন এবং নিম্নলিখিত কমান্ড চালান:
        
        Bash
        
        ```
        docker-compose up -d
        ```
        
    - এটি মনিটর, OSD এবং ম্যানেজার কন্টেইনার তৈরি এবং শুরু করবে।
        
4. **Ceph ক্লাস্টারের অবস্থা পরীক্ষা করা:**
    
    Bash
    
    ```
    docker exec -it monitor ceph -s
    ```
    
5. **Ceph ড্যাশবোর্ড অ্যাক্সেস করা:**
    
    - আপনার ব্রাউজারে `http://localhost:8080` খুলুন। ড্যাশবোর্ডের জন্য ডিফল্ট ইউজারনেম `admin` এবং পাসওয়ার্ড আপনি ডকার কম্পোজ ফাইলে সেট করতে পারেন (যদি না ডিফল্ট কনফিগারেশন ব্যবহার করেন)।
        

এইভাবে আপনি ডকারের মাধ্যমে একটি বেসিক সিঙ্গেল-নোড Ceph ক্লাস্টার রান করতে পারেন। মাল্টি-নোড ডকার Ceph ক্লাস্টার সেটআপ করা আরও জটিল এবং নেটওয়ার্কিং কনফিগারেশনের প্রয়োজন হয়। প্রোডাকশনের জন্য, কুবারনেটস এবং Rook ব্যবহার করে Ceph ডেপ্লয় করা একটি ভালো বিকল্প।

---

```
Docker compose দিয়ে ceph install করার বিস্তারিত ধাপে-ধাপে বর্ণনা করুন। এবংDocker compose দিয়ে ceph এর প্রাথমিক থেকে অ্যাডভাঞ্চ কনফিগারেশন ধাপে-ধাপে দেখাবেন এবং প্রতিটি স্টেপের বর্ণনা দিবেন।  
```

#### ডকার কম্পোজ ব্যবহার করে Ceph ইনস্টল করার বিস্তারিত ধাপ এবং প্রাথমিক থেকে অ্যাডভান্স কনফিগারেশন:

ডকার কম্পোজ ব্যবহার করে Ceph ইনস্টল করা মূলত ডেভেলপমেন্ট, টেস্টিং অথবা সিঙ্গেল-নোড ডেপ্লয়মেন্টের জন্য উপযুক্ত। মাল্টি-নোড প্রোডাকশন ডেপ্লয়মেন্টের জন্য Rook-এর মতো কুবারনেটস অর্কেস্ট্রেটর বেশি উপযোগী।

**ধাপ ১: ডকার এবং ডকার কম্পোজ ইনস্টল করা:**

প্রথমে আপনার সিস্টেমে ডকার এবং ডকার কম্পোজ ইনস্টল করা থাকতে হবে। যদি ইনস্টল করা না থাকে, আপনার অপারেটিং সিস্টেম অনুযায়ী নিচের কমান্ডগুলো ব্যবহার করতে পারেন:

**উবুন্টু/ডেবিয়ান:**

Bash

```
sudo apt update
sudo apt install -y docker.io docker-compose
sudo systemctl start docker
sudo systemctl enable docker
```

**সেন্টওএস/আরএইচইএল:**

Bash

```
sudo yum install -y docker docker-compose
sudo systemctl start docker
sudo systemctl enable docker
```

ডকার ইনস্টল করার পর, `docker --version` এবং `docker-compose --version` কমান্ড ব্যবহার করে ইনস্টলেশন যাচাই করুন।

**ধাপ ২: ডকার কম্পোজ ফাইল তৈরি করা (`docker-compose.yaml`):**

একটি নতুন ডিরেক্টরি তৈরি করুন যেখানে আপনি Ceph কনফিগারেশন ফাইল রাখবেন। সেই ডিরেক্টরির মধ্যে `docker-compose.yaml` নামে একটি ফাইল তৈরি করুন।

**প্রাথমিক কনফিগারেশন (সিঙ্গেল-নোড):**

YAML

```
version: '3.8'
services:
  monitor:
    image: ceph/daemon:latest-quincy # সর্বশেষ স্থিতিশীল কুইন্সি ভার্সন ব্যবহার করছি
    container_name: monitor
    hostname: monitor
    ports:
      - "6789:6789" # Ceph মনিটরের ডিফল্ট পোর্ট
    volumes:
      - ceph_mon_data:/var/lib/ceph/mon/ceph-monitor # মনিটরের ডেটা সংরক্ষণের জন্য ভলিউম
    networks:
      ceph_net:
        ipv4_address: 172.20.0.10 # কাস্টম নেটওয়ার্কের জন্য আইপি অ্যাড্রেস

  osd:
    image: ceph/daemon:latest-quincy
    container_name: osd
    hostname: osd
    depends_on:
      - monitor # OSD শুরু হওয়ার আগে মনিটর শুরু হতে হবে
    environment:
      - CEPH_MON_IP=172.20.0.10 # মনিটরের আইপি অ্যাড্রেস OSD কে জানাতে হবে
      - CEPH_VOLUME=/var/lib/ceph/osd/ceph-0 # OSD ডেটার জন্য অভ্যন্তরীণ পাথ
    volumes:
      - ceph_osd_data:/var/lib/ceph/osd/ceph-0 # OSD ডেটা সংরক্ষণের জন্য ভলিউম
      - /dev:/dev # হোস্ট ডিভাইসের সাথে ইন্টারঅ্যাক্ট করার অনুমতি
    devices:
      - /dev/sdb:/dev/sdb # আপনার ডেডিকেটেড ডিস্কের পাথ (পরিবর্তন করুন)
    networks:
      ceph_net:
        ipv4_address: 172.20.0.20
    privileged: true # OSD-এর জন্য ডিভাইসের সাথে সরাসরি ইন্টারঅ্যাক্ট করার অনুমতি

  mgr:
    image: ceph/daemon:latest-quincy
    container_name: mgr
    hostname: mgr
    depends_on:
      - monitor
      - osd # ম্যানেজার শুরু হওয়ার আগে মনিটর এবং OSD শুরু হতে হবে
    ports:
      - "8080:8080" # Ceph ম্যানেজার ড্যাশবোর্ডের জন্য পোর্ট
    environment:
      - CEPH_MON_IP=172.20.0.10
      - CEPH_MGR_MODULES=dashboard # ড্যাশবোর্ড মডিউল সক্রিয় করা
      - CEPH_MGR_DASHBOARD_BIND_PORT=8080
      - CEPH_MGR_DASHBOARD_SSL=off # প্রাথমিক পরীক্ষার জন্য SSL নিষ্ক্রিয় রাখা
    volumes:
      - ceph_mgr_data:/var/lib/ceph/mgr/ceph-mgr # ম্যানেজারের ডেটা সংরক্ষণের জন্য ভলিউম
    networks:
      ceph_net:
        ipv4_address: 172.20.0.30

networks:
  ceph_net:
    ipam:
      driver: default
      config:
        - subnet: 172.20.0.0/24 # কাস্টম নেটওয়ার্কের জন্য সাবনেট

volumes:
  ceph_mon_data:
  ceph_osd_data:
  ceph_mgr_data:
```

**প্রতিটি স্টেপের বর্ণনা:**

- `version: '3.8'`: ডকার কম্পোজ ফাইলের ফরম্যাট ভার্সন।
    
- `services`: এখানে বিভিন্ন কন্টেইনার সার্ভিস সংজ্ঞায়িত করা হয়।
    
    - `monitor`: Ceph ক্লাস্টারের স্বাস্থ্য এবং ঐকমত্য বজায় রাখে।
        
        - `image`: ব্যবহৃত ডকার ইমেজ (অফিসিয়াল Ceph ডেমোন ইমেজ)।
            
        - `container_name`: কন্টেইনারের নাম।
            
        - `hostname`: কন্টেইনারের হোস্টনাম।
            
        - `ports`: হোস্ট এবং কন্টেইনারের মধ্যে পোর্ট ম্যাপিং। `6789` হলো Ceph মনিটরের ডিফল্ট পোর্ট।
            
        - `volumes`: হোস্টের ডিরেক্টরি বা ডকার ভলিউমের সাথে কন্টেইনারের ডিরেক্টরির ম্যাপিং। এখানে মনিটরের ডেটা `/var/lib/ceph/mon/ceph-monitor`-এ সংরক্ষণ করা হচ্ছে।
            
        - `networks`: কন্টেইনারটি যে ডকার নেটওয়ার্কের অংশ। এখানে `ceph_net` নামে একটি কাস্টম নেটওয়ার্ক তৈরি করা হয়েছে।
            
        - `ipv4_address`: কন্টেইনারের জন্য স্থির আইপি অ্যাড্রেস।
            
    - `osd`: অবজেক্ট স্টোরেজ ডিভাইস, যেখানে প্রকৃত ডেটা সংরক্ষণ করা হয়।
        
        - `depends_on`: এই সার্ভিসটি শুরু হওয়ার আগে কোন সার্ভিসগুলো চালু থাকতে হবে।
            
        - `environment`: কন্টেইনারের মধ্যে এনভায়রনমেন্ট ভেরিয়েবল সেট করা হয়। `CEPH_MON_IP` মনিটরের আইপি ঠিকানা নির্দেশ করে। `CEPH_VOLUME` OSD ডেটার অভ্যন্তরীণ পাথ।
            
        - `devices`: হোস্টের ডিভাইসকে কন্টেইনারের মধ্যে অ্যাক্সেস করার অনুমতি দেওয়া হয়। এখানে `/dev/sdb` (আপনার ডেডিকেটেড ডিস্ক) কন্টেইনারের `/dev/sdb`-এর সাথে ম্যাপ করা হয়েছে। **এটি পরিবর্তন করতে ভুলবেন না!**
            
        - `privileged: true`: কন্টেইনারকে হোস্টের ডিভাইসগুলির সাথে সরাসরি ইন্টারঅ্যাক্ট করার জন্য বিশেষ সুবিধা দেওয়া হয়, যা OSD-এর জন্য প্রয়োজন।
            
    - `mgr`: Ceph ম্যানেজার, যা ক্লাস্টারের অ্যাডমিনিস্ট্রেশন এবং মনিটরিংয়ের জন্য বিভিন্ন মডিউল সরবরাহ করে (যেমন ড্যাশবোর্ড)।
        
        - `ports`: ম্যানেজার ড্যাশবোর্ডের জন্য পোর্ট ম্যাপিং। `8080` পোর্টে ড্যাশবোর্ড অ্যাক্সেস করা যাবে।
            
        - `environment`: `CEPH_MGR_MODULES=dashboard` ড্যাশবোর্ড মডিউল সক্রিয় করে। `CEPH_MGR_DASHBOARD_BIND_PORT` ড্যাশবোর্ডের পোর্ট নির্ধারণ করে। `CEPH_MGR_DASHBOARD_SSL=off` প্রাথমিক পরীক্ষার জন্য SSL নিষ্ক্রিয় রাখে।
            
- `networks`: কাস্টম ডকার নেটওয়ার্ক `ceph_net` সংজ্ঞায়িত করা হয়েছে।
    
    - `ipam`: আইপি অ্যাড্রেস ম্যানেজমেন্ট কনফিগারেশন। এখানে একটি নির্দিষ্ট সাবনেট (`172.20.0.0/24`) ব্যবহার করা হচ্ছে।
        
- `volumes`: ডকার ভলিউম সংজ্ঞায়িত করা হয়েছে যা কন্টেইনারের ডেটা হোস্ট সিস্টেমে persistent করে।
    

**ধাপ ৩: Ceph ক্লাস্টার শুরু করা:**

যে ডিরেক্টরিতে `docker-compose.yaml` ফাইলটি রেখেছেন, সেখানে টার্মিনাল খুলুন এবং নিম্নলিখিত কমান্ড চালান:

Bash

```
docker-compose up -d
```

`-d` ফ্ল্যাগ কন্টেইনারগুলোকে ব্যাকগ্রাউন্ডে রান করবে।

**ধাপ ৪: Ceph ক্লাস্টারের অবস্থা পরীক্ষা করা:**

কন্টেইনারগুলো চালু হওয়ার পর, নিম্নলিখিত কমান্ড ব্যবহার করে Ceph ক্লাস্টারের অবস্থা পরীক্ষা করতে পারেন:

Bash

```
docker exec -it monitor ceph -s
```

এই কমান্ডটি মনিটর কন্টেইনারের ভিতরে `ceph -s` (ceph status) কমান্ডটি চালাবে এবং ক্লাস্টারের একটি সংক্ষিপ্ত বিবরণ দেখাবে।

**ধাপ ৫: Ceph ড্যাশবোর্ড অ্যাক্সেস করা:**

আপনার ব্রাউজারে `http://localhost:8080` খুলুন। ডিফল্টরূপে, ড্যাশবোর্ডের জন্য কোনো লগইন কনফিগার করা নাও থাকতে পারে অথবা ইমেজ ভেদে ভিন্ন হতে পারে। কন্টেইনার লগ পরীক্ষা করে অথবা Ceph ডকুমেন্টেশন দেখে ডিফল্ট ইউজারনেম এবং পাসওয়ার্ড সম্পর্কে জানতে পারেন। প্রাথমিক পরীক্ষার জন্য SSL নিষ্ক্রিয় রাখা হয়েছে, তাই `http` ব্যবহার করুন।

## অ্যাডভান্স কনফিগারেশন:

ডকার কম্পোজের মাধ্যমে অ্যাডভান্স কনফিগারেশন সাধারণত পরিবেশ পরিবর্তনশীল (environment variables) এবং ভলিউম মাউন্টিংয়ের মাধ্যমে করা হয়।

**১. একাধিক OSD যোগ করা:**

একাধিক OSD যোগ করার জন্য, `docker-compose.yaml` ফাইলে `osd` সার্ভিসের আরেকটি কপি তৈরি করতে হবে এবং প্রতিটি OSD-এর জন্য আলাদা ডেটা ভলিউম এবং ডিভাইস মাউন্ট করতে হবে।

YAML

```
  osd1:
    image: ceph/daemon:latest-quincy
    container_name: osd1
    hostname: osd1
    depends_on:
      - monitor
    environment:
      - CEPH_MON_IP=172.20.0.10
      - CEPH_VOLUME=/var/lib/ceph/osd/ceph-1
    volumes:
      - ceph_osd1_data:/var/lib/ceph/osd/ceph-1
      - /dev:/dev
    devices:
      - /dev/sdc:/dev/sdc # দ্বিতীয় ডিস্কের পাথ (পরিবর্তন করুন)
    networks:
      ceph_net:
        ipv4_address: 172.20.0.21
    privileged: true

  osd2:
    image: ceph/daemon:latest-quincy
    container_name: osd2
    hostname: osd2
    depends_on:
      - monitor
    environment:
      - CEPH_MON_IP=172.20.0.10
      - CEPH_VOLUME=/var/lib/ceph/osd/ceph-2
    volumes:
      - ceph_osd2_data:/var/lib/ceph/osd/ceph-2
      - /dev:/dev
    devices:
      - /dev/sdd:/dev/sdd # তৃতীয় ডিস্কের পাথ (পরিবর্তন করুন)
    networks:
      ceph_net:
        ipv4_address: 172.20.0.22
    privileged: true

volumes:
  ceph_mon_data:
  ceph_osd_data:
  ceph_osd1_data:
  ceph_osd2_data:
  ceph_mgr_data:
```

এখানে `osd1` এবং `osd2` নামে দুটি নতুন OSD সার্ভিস যোগ করা হয়েছে, প্রতিটি আলাদা হোস্টনাম, আইপি অ্যাড্রেস, ভলিউম এবং ডিভাইস ব্যবহার করছে।

**২. একাধিক মনিটর যোগ করা (উচ্চ স্থিতিশীলতার জন্য):**

একাধিক মনিটর যোগ করার জন্য, `monitor` সার্ভিসের আরেকটি কপি তৈরি করতে হবে এবং প্রতিটি মনিটরের জন্য আলাদা ডেটা ভলিউম এবং পোর্ট কনফিগার করতে হবে। তবে, মাল্টি-মনিটর ক্লাস্টার কনফিগারেশন ডকার কম্পোজে জটিল হতে পারে কারণ তাদের মধ্যে কোরাম (quorum) বজায় রাখতে হয়। এর জন্য Ceph কনফিগারেশন ফাইলের প্রয়োজন হতে পারে।

**৩. Ceph কনফিগারেশন ফাইল ব্যবহার করা:**

আপনি আপনার নিজস্ব `ceph.conf` ফাইল তৈরি করতে পারেন এবং এটিকে ভলিউমের মাধ্যমে কন্টেইনারে মাউন্ট করতে পারেন।

প্রথমে একটি `ceph.conf` ফাইল তৈরি করুন:

Ini, TOML

```
[global]
fsid = YOUR_FSID # আপনার ক্লাস্টারের অনন্য আইডি
mon_initial_members = monitor1,monitor2,monitor3
mon_host = 172.20.0.10,172.20.0.11,172.20.0.12
public_network = 172.20.0.0/24
cluster_network = 172.20.0.0/24

[mon.monitor1]
host = monitor1
addr = 172.20.0.10:6789

[mon.monitor2]
host = monitor2
addr = 172.20.0.11:6789

[mon.monitor3]
host = monitor3
addr = 172.20.0.12:6789
```

তারপর `docker-compose.yaml` ফাইলে ভলিউম মাউন্ট করুন:

YAML

```
  monitor1:
    image: ceph/daemon:latest-quincy
    container_name: monitor1
    hostname: monitor1
    ports:
      - "6789:6789"
    volumes:
      - ceph_mon1_data:/var/lib/ceph/mon/ceph-monitor1
      - ./ceph.conf:/etc/ceph/ceph.conf:ro # কনফিগারেশন ফাইল মাউন্ট করা
    networks:
      ceph_net:
        ipv4_address: 172.20.0.10
    command: "ceph-mon -i monitor1" # নির্দিষ্ট মনিটর আইডি দিয়ে শুরু করা

  monitor2:
    image: ceph/daemon:latest-quincy
    container_name: monitor2
    hostname: monitor2
    ports:
      - "6790:6789" # আলাদা পোর্ট ব্যবহার করা
    volumes:
      - ceph_mon2_data:/var/lib/ceph/mon/ceph-monitor2
      - ./ceph.conf:/etc/ceph/ceph.conf:ro
    networks:
      ceph_net:
        ipv4_address: 172.20.0.11
    command: "ceph-mon -i monitor2"

  monitor3:
    image: ceph/daemon:latest-quincy
    container_name: monitor3
    hostname: monitor3
    ports:
      - "6791:6789" # আলাদা পোর্ট ব্যবহার করা
    volumes:
      - ceph_mon3_data:/var/lib/ceph/mon/ceph-monitor3
      - ./ceph.conf:/etc/ceph/ceph.conf:ro
    networks:
      ceph_net:
        ipv4_address: 172.20.0.12
    command: "ceph-mon -i monitor3"

  # ... অন্যান্য সার্ভিস ...

volumes:
  ceph_mon1_data:
  ceph_mon2_data:
  ceph_mon3_data:
  # ... অন্যান্য ভলিউম ...
```

এখানে প্রতিটি মনিটরের জন্য আলাদা কন্টেইনার, হোস্টনাম, আইপি এবং ডেটা ভলিউম ব্যবহার করা হয়েছে। `command` ফিল্ড ব্যবহার করে নির্দিষ্ট মনিটর আইডি (`-i`) দিয়ে মনিটর প্রক্রিয়া শুরু করা হয়েছে। `ceph.conf` ফাইলটি read-only (`:ro`) মোডে মাউন্ট করা হয়েছে।

**৪. পরিবেশ পরিবর্তনশীল ব্যবহার করে কনফিগারেশন:**

অনেক Ceph কনফিগারেশন পরিবেশ পরিবর্তনশীলের মাধ্যমে নিয়ন্ত্রণ করা যায়। আপনি `environment` সেকশনে বিভিন্ন Ceph-সম্পর্কিত ভেরিয়েবল সেট করতে পারেন। Ceph ডকার ইমেজের ডকুমেন্টেশনে উপলব্ধ ভেরিয়েবল সম্পর্কে বিস্তারিত জানতে পারেন।

**৫. নেটওয়ার্কিং কনফিগারেশন:**

ডকার নেটওয়ার্ক ব্যবহার করে কন্টেইনারগুলোর মধ্যে যোগাযোগ স্থাপন করা হয়। আপনি কাস্টম নেটওয়ার্ক তৈরি করতে এবং প্রতিটি কন্টেইনারের জন্য স্ট্যাটিক আইপি অ্যাড্রেস নির্ধারণ করতে পারেন, যা Ceph ক্লাস্টারের স্থিতিশীলতার জন্য সহায়ক হতে পারে।

**৬. CephFS, RGW (Object Gateway) যোগ করা:**

CephFS (Ceph File System) এবং RGW (RADOS Gateway) যোগ করার জন্য, `docker-compose.yaml` ফাইলে তাদের সার্ভিস সংজ্ঞা যোগ করতে হবে।

**CephFS MDS:**

YAML

```
  mds:
    image: ceph/daemon:latest-quincy
    container_name: mds
    hostname: mds
    depends_on:
      - monitor
    environment:
      - CEPH_MON_IP=172.20.0.10
    volumes:
      - ceph_mds_data:/var/lib/ceph/mds/ceph-mds
    networks:
      ceph_net:
        ipv4_address: 172.20.0.40
```

**RGW:**

YAML

```
  rgw:
    image: ceph/daemon:latest-quincy
    container_name: rgw
    hostname: rgw
    depends_on:
      - monitor
    ports:
      - "80:80" # RGW অ্যাক্সেসের জন্য পোর্ট
    environment:
      - CEPH_MON_IP=172.20.0.10
      - CEPH_NETWORK=172.20.0.0/24
    volumes:
      - ceph
```


---

